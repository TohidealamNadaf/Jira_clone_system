================================================================================
REAL-TIME NOTIFICATIONS - TEST GUIDE
================================================================================

‚è±Ô∏è TOTAL TEST TIME: 5 minutes

PREREQUISITES:
==============
‚úÖ Jira Clone running on http://localhost:8080/jira_clone_system/public/
‚úÖ At least 2 user accounts created
‚úÖ Modern browser (Chrome, Firefox, Safari, Edge)

TEST 1: BASIC REAL-TIME DELIVERY (2 minutes)
=============================================

SETUP:
1. Open Jira Clone in 2 browser windows side-by-side
2. Window 1 (LEFT): Login as User A (admin@example.com / Admin@123)
3. Window 2 (RIGHT): Login as User B (different user, or incognito)
4. Both should be on Dashboard

TEST STEPS:
1. In Window 1 (User A): 
   - Click "Create" button (top-right)
   - Fill form:
     - Project: ECOM
     - Type: Feature
     - Summary: "Test Real-Time Notification"
     - Description: "Testing instant delivery"
     - Assignee: Select User B
   - Click "Create Issue"

2. In Window 2 (User B):
   - Watch screen carefully
   - Should see toast notification slide in from RIGHT
   - Toast should show: "üéØ Issue ECOM-XX assigned to you"
   - Should happen INSTANTLY (within 2-5 seconds)
   - NO page refresh should have happened

EXPECTED RESULTS:
‚úÖ Toast notification appears in Window 2 instantly
‚úÖ Toast shows correct issue key (e.g., ECOM-50)
‚úÖ Notification badge (red dot) shows in navbar
‚úÖ Badge shows "1" unread notification
‚úÖ Toast auto-dismisses after ~8 seconds
‚úÖ No page refresh in Window 2

PASS/FAIL: ____________________

---

TEST 2: BROWSER CONSOLE LOGGING (2 minutes)
============================================

SETUP:
1. Keep both windows open from TEST 1
2. In Window 2 (User B): Press F12 to open DevTools
3. Click "Console" tab
4. Clear any existing messages

TEST STEPS:
1. In Window 2 Console, look for existing logs:
   - Should see: "‚úÖ [REALTIME] Notification system initialized"
   - Should see: "‚úÖ [REALTIME] Connected to notification stream"
   - These might be above current view - scroll up if needed

2. In Window 1 (User A):
   - Create another issue (assign to User B again)
   - Or add comment to existing ECOM issue

3. In Window 2 Console:
   - Should immediately see new logs:
   
   LOOK FOR:
   ‚úÖ "üì® [REALTIME] New notification received:"
   ‚úÖ "üçû [REALTIME] Toast notification shown"
   ‚úÖ "üìä [REALTIME] Updated notification count: 2"

EXPECTED RESULTS:
‚úÖ Console shows [REALTIME] logs in real-time
‚úÖ "New notification received" log appears first
‚úÖ "Toast notification shown" log appears next
‚úÖ "Updated notification count" log shows new count
‚úÖ All within 1-2 seconds

PASS/FAIL: ____________________

---

TEST 3: NOTIFICATION COUNT BADGE (1 minute)
============================================

SETUP:
From TEST 1 & 2, you should already have notifications

TEST STEPS:
1. In Window 2 (User B):
   - Look at top-right navbar
   - Find the bell icon (notification icon)
   - Should have red badge with white number

2. Count the number shown in badge
   - Should be 2+ (from previous tests)

3. Click the notification badge (bell icon)
   - Dropdown should appear
   - Should show list of notifications
   - Should list: "Issue ECOM-XX assigned to you"

4. Unread count color:
   - Should be RED background
   - Should have WHITE number

EXPECTED RESULTS:
‚úÖ Red badge visible on bell icon
‚úÖ Shows correct count (2+)
‚úÖ Clicking badge opens dropdown
‚úÖ Dropdown shows notification list
‚úÖ Each item shows issue key and action
‚úÖ Badge color is red

PASS/FAIL: ____________________

---

TEST 4: CLICK TO NAVIGATE (1 minute)
====================================

SETUP:
From previous tests

TEST STEPS:
1. In Window 2 (User B):
   - Look for a toast notification on screen
   - If dismissed, have User A create another issue assigned to User B

2. When toast appears:
   - Click on the toast message itself
   - Should navigate to the issue
   - Page should NOT need manual refresh

3. Or click from dropdown:
   - Click notification badge (bell icon)
   - Find notification in dropdown
   - Click on notification item
   - Should navigate to issue

EXPECTED RESULTS:
‚úÖ Clicking toast navigates to issue
‚úÖ Issue detail page loads
‚úÖ Shows correct issue
‚úÖ All without manual page refresh

PASS/FAIL: ____________________

---

TEST 5: MULTIPLE RAPID NOTIFICATIONS (1 minute)
===============================================

SETUP:
Both windows still open

TEST STEPS:
1. In Window 1 (User A):
   - Create 3 issues RAPIDLY (one after another)
   - Assign all 3 to User B
   - Do this within 10 seconds

2. In Window 2 (User B):
   - Should see 3 toasts appear
   - Each sliding in from right
   - Each with slightly different content
   - Stacking on top of each other

3. Check badge:
   - Badge should show "3" or more
   - Updated in real-time

4. Check console:
   - Should see 3 "New notification received" logs
   - Each within 1-2 seconds

EXPECTED RESULTS:
‚úÖ 3 toasts appear (not just 1)
‚úÖ Toasts stack vertically
‚úÖ Each toast appears within 2 seconds
‚úÖ Badge count increases
‚úÖ Console shows all 3 notifications
‚úÖ All within ~5 seconds total

PASS/FAIL: ____________________

---

BONUS TEST: BROWSER NOTIFICATIONS (Optional)
==============================================

SETUP:
Chrome/Firefox only (Safari requires special setup)

TEST STEPS:
1. On first load, browser should ask for notification permission
2. Click "Allow" on the permission prompt
3. Have User A create an issue assigned to User B
4. Should get system notification (even if tab not in focus)

EXPECTED RESULTS:
‚úÖ Permission prompt appears (if never done before)
‚úÖ System notification shows in OS
‚úÖ Notification shows: "Jira Clone - Issue ECOM-XX assigned to you"
‚úÖ Can click to return to app

PASS/FAIL: ____________________

---

SUMMARY TABLE:
==============
Test 1: Basic Delivery     [ ] PASS [ ] FAIL
Test 2: Console Logging    [ ] PASS [ ] FAIL
Test 3: Badge Count        [ ] PASS [ ] FAIL
Test 4: Click Navigate     [ ] PASS [ ] FAIL
Test 5: Multiple Notifs    [ ] PASS [ ] FAIL
Bonus: Browser Notifs      [ ] PASS [ ] FAIL (Optional)

OVERALL RESULT: [ ] ALL TESTS PASS ‚úÖ [ ] SOME TESTS FAIL ‚ùå

---

TROUBLESHOOTING:
================

Issue: Toast not appearing
- Check: Is SSE connected? (Console should show: ‚úÖ [REALTIME] Connected)
- Check: Did User A assign to User B? (Not themselves)
- Check: Hard refresh (Ctrl+F5) and try again
- Check: Browser console for errors (F12)

Issue: Badge not updating
- Check: Console shows "Updated notification count"?
- Try: Click bell icon to refresh dropdown
- Try: Reload page (Ctrl+F5)

Issue: Console not showing [REALTIME] logs
- Check: Is User B logged in?
- Check: Is Connection Status (bottom-right) green?
- Check: Are you looking at User B's console (not User A)?
- Try: Reload page

Issue: Constant reconnecting (red dot flickering)
- Check: Server logs for errors
- Check: Database connectivity
- Check: PHP memory limits
- Try: Restart PHP/Apache

---

SUCCESS CRITERIA:
=================
‚úÖ Toast appears within 2-5 seconds (no refresh)
‚úÖ Badge updates instantly
‚úÖ Multiple notifications appear when needed
‚úÖ Console shows [REALTIME] logs
‚úÖ Click notification navigates to issue
‚úÖ Green connection indicator (bottom-right)
‚úÖ All without page refresh!

If ALL tests pass ‚Üí System is working perfectly! üéâ

---

CONSOLE QUICK REFERENCE:
========================
// Check if connected
window.realtimeNotifications.isConnected

// Get last notification ID
window.realtimeNotifications.lastEventId

// Check connection attempts
window.realtimeNotifications.reconnectAttempts

// Disable sound
window.realtimeNotifications.notificationSound = false

// Show test toast
window.realtimeNotifications.showToast({
    id: 999,
    type: 'issue_assigned',
    message: 'Test notification',
    timestamp: new Date().toISOString(),
    issueId: 1
})

---

NEXT STEPS:
===========
1. ‚úÖ Complete all 5 tests
2. ‚úÖ Mark PASS/FAIL for each
3. ‚úÖ Note any issues found
4. ‚úÖ Check troubleshooting if problems
5. ‚úÖ System is ready if all tests pass!

Good luck! üöÄ
================================================================================
