<!DOCTYPE html>
<html>
<head>
    <title>Team Member Avatar Fix Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        .avatar-preview { width: 50px; height: 50px; border-radius: 50%; margin: 10px 0; }
        .placeholder { background: linear-gradient(135deg, #8B1956 0%, #6F123F 100%); color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Team Member Avatar Fix Verification</h1>
    
    <div class="test-section">
        <h2>Project Members Page Test</h2>
        <p>Navigate to: <code>/projects/YOUR_PROJECT_KEY/members</code></p>
        <ul>
            <li>✓ Profile photos should display correctly</li>
            <li>✓ Broken photos should show initials</li>
            <li>✓ Lead badges should be visible</li>
            <li>✓ Hover effects should work</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Project Overview Page Test</h2>
        <p>Navigate to: <code>/projects/YOUR_PROJECT_KEY</code></p>
        <ul>
            <li>✓ Team member avatars in sidebar should display</li>
            <li>✓ Avatars should have consistent styling</li>
            <li>✓ Fallback to initials should work</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Avatar Helper Function Test</h2>
        <?php
        require_once '../bootstrap/app.php';
        
        // Test the avatar helper
        $testCases = [
            ['input' => null, 'name' => 'Test User', 'expected' => 'empty'],
            ['input' => 'http://localhost:8081/jira_clone_system/public/uploads/avatars/avatar_1_1766052745.png', 'name' => 'Admin User', 'expected' => 'full_url'],
            ['input' => '/uploads/avatars/test.png', 'name' => 'Test User', 'expected' => 'relative_path'],
            ['input' => 'avatar_123.png', 'name' => 'Test User', 'expected' => 'filename_only']
        ];
        
        foreach ($testCases as $test) {
            $result = avatar($test['input'], $test['name']);
            $initials = avatarInitials($test['name']);
            
            echo "<div style='margin: 10px 0;'>";
            echo "<strong>Input:</strong> " . ($test['input'] ?? 'NULL') . "<br>";
            echo "<strong>Result:</strong> " . htmlspecialchars($result) . "<br>";
            echo "<strong>Initials:</strong> " . $initials . "<br>";
            echo "</div>";
        }
        ?>
    </div>
    
    <div class="test-section">
        <h2>Sample Avatar Display</h2>
        <div class="avatar-preview" style="background: url('https://via.placeholder.com/50') center/cover; width: 50px; height: 50px; border-radius: 50%;"></div>
        <div class="placeholder avatar-preview">SA</div>
        <p>Both should look similar in size and style.</p>
    </div>
    
    <script>
        console.log('Avatar fix verification page loaded');
        console.log('Team member photos should now be visible in:');
        console.log('1. Project members page: /projects/{key}/members');
        console.log('2. Project overview page sidebar');
        console.log('3. Issue assignee avatars');
    </script>
</body>
</html>