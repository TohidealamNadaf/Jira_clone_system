<!DOCTYPE html>
<html>
<head>
    <title>Roadmap Modal - Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { background: #f5f5f5; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .test-title { font-weight: bold; font-size: 14px; margin-bottom: 10px; }
        .test-item { margin: 10px 0; padding: 10px; background: white; border-left: 3px solid #0052CC; }
        .success { border-left-color: green; color: green; }
        .error { border-left-color: red; color: red; }
        .info { border-left-color: blue; color: blue; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .btn-test { background: #0052CC; color: white; border: none; border-radius: 4px; }
        .btn-test:hover { background: #003DA5; }
    </style>
</head>
<body>
    <h1>Roadmap Modal Debug Test</h1>
    
    <div class="test-section">
        <div class="test-title">1. Check Form Fields</div>
        <button class="btn-test" onclick="checkFormFields()">Check Form Fields</button>
        <div id="formFieldsResult"></div>
    </div>

    <div class="test-section">
        <div class="test-title">2. Check Modal Elements</div>
        <button class="btn-test" onclick="checkModalElements()">Check Modal Elements</button>
        <div id="modalElementsResult"></div>
    </div>

    <div class="test-section">
        <div class="test-title">3. Check JavaScript Functions</div>
        <button class="btn-test" onclick="checkJSFunctions()">Check JS Functions</button>
        <div id="jsResultsResult"></div>
    </div>

    <div class="test-section">
        <div class="test-title">4. Test Form Submission</div>
        <button class="btn-test" onclick="testFormSubmission()">Simulate Form Submission</button>
        <div id="submissionResult"></div>
    </div>

    <div class="test-section">
        <div class="test-title">5. Browser Console</div>
        <p>Open DevTools: Press F12</p>
        <p>Go to Console tab</p>
        <p>Look for [ROADMAP MODAL] messages</p>
        <button class="btn-test" onclick="testConsoleLog()">Test Console Log</button>
        <div id="consoleResult"></div>
    </div>

    <script>
        function addResult(elementId, message, type = 'info') {
            const div = document.getElementById(elementId);
            const item = document.createElement('div');
            item.className = `test-item ${type}`;
            item.textContent = message;
            div.appendChild(item);
        }

        function checkFormFields() {
            const result = document.getElementById('formFieldsResult');
            result.innerHTML = '';
            
            const fields = [
                { id: 'item_title', expected: 'text' },
                { id: 'item_description', expected: 'textarea' },
                { id: 'item_type', expected: 'select' },
                { id: 'item_status', expected: 'select' },
                { id: 'item_start_date', expected: 'date' },
                { id: 'item_end_date', expected: 'date' },
                { id: 'item_progress', expected: 'number' },
                { id: 'csrf_token', expected: 'hidden' },
                { id: 'project_id', expected: 'hidden' }
            ];

            fields.forEach(field => {
                const elem = document.getElementById(field.id);
                if (elem) {
                    addResult('formFieldsResult', `✓ ${field.id} found (${field.expected})`, 'success');
                } else {
                    addResult('formFieldsResult', `✗ ${field.id} NOT FOUND`, 'error');
                }
            });
        }

        function checkModalElements() {
            const result = document.getElementById('modalElementsResult');
            result.innerHTML = '';
            
            const modal = document.getElementById('createModal');
            if (modal) {
                addResult('modalElementsResult', '✓ createModal element found', 'success');
            } else {
                addResult('modalElementsResult', '✗ createModal element NOT FOUND', 'error');
            }

            const dialog = document.querySelector('.modal-dialog');
            if (dialog) {
                addResult('modalElementsResult', '✓ .modal-dialog element found', 'success');
            } else {
                addResult('modalElementsResult', '✗ .modal-dialog element NOT FOUND', 'error');
            }

            const errorDiv = document.getElementById('modalError');
            if (errorDiv) {
                addResult('modalElementsResult', '✓ modalError element found', 'success');
            } else {
                addResult('modalElementsResult', '✗ modalError element NOT FOUND', 'error');
            }

            const footer = document.querySelector('.modal-footer');
            if (footer) {
                addResult('modalElementsResult', '✓ .modal-footer element found', 'success');
            } else {
                addResult('modalElementsResult', '✗ .modal-footer element NOT FOUND', 'error');
            }
        }

        function checkJSFunctions() {
            const result = document.getElementById('jsResultsResult');
            result.innerHTML = '';
            
            if (typeof showCreateItemModal === 'function') {
                addResult('jsResultsResult', '✓ showCreateItemModal() function exists', 'success');
            } else {
                addResult('jsResultsResult', '✗ showCreateItemModal() function NOT FOUND', 'error');
            }

            if (typeof submitCreateItem === 'function') {
                addResult('jsResultsResult', '✓ submitCreateItem() function exists', 'success');
            } else {
                addResult('jsResultsResult', '✗ submitCreateItem() function NOT FOUND', 'error');
            }

            if (typeof closeCreateModal === 'function') {
                addResult('jsResultsResult', '✓ closeCreateModal() function exists', 'success');
            } else {
                addResult('jsResultsResult', '✗ closeCreateModal() function NOT FOUND', 'error');
            }
        }

        function testFormSubmission() {
            const result = document.getElementById('submissionResult');
            result.innerHTML = '';
            
            try {
                addResult('submissionResult', 'Testing form submission flow...', 'info');
                
                // Fill form
                document.getElementById('item_title').value = 'Test Epic';
                document.getElementById('item_type').value = 'epic';
                document.getElementById('item_status').value = 'planned';
                document.getElementById('item_start_date').value = '2025-01-15';
                document.getElementById('item_end_date').value = '2025-02-28';
                document.getElementById('item_progress').value = '0';
                
                addResult('submissionResult', '✓ Form fields filled with test data', 'success');
                
                // Check values
                const title = document.getElementById('item_title').value;
                if (title === 'Test Epic') {
                    addResult('submissionResult', `✓ Title field readable: "${title}"`, 'success');
                } else {
                    addResult('submissionResult', `✗ Title field value wrong: "${title}"`, 'error');
                }
                
                addResult('submissionResult', 'Check console (F12) for [ROADMAP MODAL] logs when you click Create Item', 'info');
                
            } catch (e) {
                addResult('submissionResult', `✗ Error: ${e.message}`, 'error');
            }
        }

        function testConsoleLog() {
            console.log('[ROADMAP MODAL] Test console logging is working');
            console.log('[ROADMAP MODAL] Check browser console (F12 → Console tab)');
            addResult('consoleResult', '✓ Check browser console (F12 → Console tab) for logs', 'success');
        }

        // Run initial checks
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[ROADMAP MODAL] Page loaded - Ready for testing');
        });
    </script>
</body>
</html>
